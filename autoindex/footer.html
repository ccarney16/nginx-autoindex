        </div>
        <footer>Powered by Nginx!</footer>

        <!--JQuery-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>        
        <script src="/autoindex/js/bootstrap.min.js"></script>
        <!--Main Script-->
        <script type="text/javascript">
            function getParent(path) {
                var split = path.split('/');
                var _parent = '';
                for (var i = 0; i < split.length - 2; i++) { _parent += split[i] + '/'; }
                return _parent;
            }
            $('#page-header').html('<h2> Index <small>' + window.location.pathname + '</small></h2>');
            if (!window.location.pathname.endsWith('/')) alert('WARNING! Strange setup detected, this page may not work (Did you correctly configure nginx correctly?)');
            $('#parent-link').html('<a href="' + getParent(window.location.pathname) +'"><span class="glyphicon glyphicon-share-alt"></span> Parent Directory</a>');

            document.addEventListener('DOMContentLoaded', function() {
                let json = JSON.parse($('#json-output').text());
                var tblhtml = $('#file-table').html();
                for (let entry of json) {
                    if (entry.type == "directory") {
                        tblhtml += '<tr><td><a href="' + window.location.pathname + '' + entry.name + '/"><span class="glyphicon glyphicon-folder-open"></span>&nbsp;&nbsp;&nbsp;' + entry.name + '</a></td><td>' + entry.type + '</td><td>' + entry.mtime + '</td><td></td></tr>';
                    } else if (entry.type == 'file') {
                        tblhtml += '<tr><td><a href="' + window.location.pathname + '' + entry.name +'"><span class="glyphicon glyphicon-file"></span>&nbsp;&nbsp;&nbsp;' + entry.name + '</a></td><td>' + entry.type + '</td><td>' + entry.mtime + '</td><td>' + convertBytes(entry.size) +  '</td></tr>';
                    }
                }
                $('#file-table').html(tblhtml);
            });
            //Will see about rewriting this in the future, but this will do for now...
            function convertBytes(size) {
                var UNDER = 1.0;
                var BytesToGB = 1073741824;
                var BytesToMB = 1048576;
                var BytesToKB = 1024;

                if(size / BytesToGB > UNDER) {
                    return ((size / BytesToGB).toFixed(2)).toString() + 'GB'
                } else if (size / BytesToMB > UNDER){
                    return ((size / BytesToMB).toFixed(2)).toString() + 'MB'
                } else if (size / BytesToKB > UNDER){
                    return ((size / BytesToKB).toFixed(2)).toString() + 'KB'
                } else {
                    return size + 'B'
                }
            }
        </script>
    </body>
</html> 